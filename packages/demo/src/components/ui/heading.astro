---
import { cn } from "@/lib/utils";
import type { HTMLAttributes } from "astro/types";

type HeadingTagType = "h1" | "h2" | "h3" | "h4" | "h5" | "h6";
interface Props extends HTMLAttributes<HeadingTagType> {
  as: HeadingTagType;
  displayAs?: HeadingTagType;
}

const { displayAs, as = "h1", ...props } = Astro.props;

// Map displayAs (1-6) to Tailwind classes
const displayClasses = {
  h1: "text-4xl font-bold [&>code]:text-3xl",
  h2: "text-2xl font-semibold [&>code]:text-xl",
  h3: "text-xl font-medium [&>code]:text-lg",
  h4: "text-lg font-medium [&>code]:text-base",
  h5: "text-base font-medium [&>code]:text-sm",
  h6: "text-sm font-medium [&>code]:text-xs",
};

const displayClass =
  displayClasses[displayAs as keyof typeof displayClasses] ||
  displayClasses[as];
const HeadingTag = as as HeadingTagType;
---

<HeadingTag
  class={cn(
    displayClass,
    "[&>code]:bg-card [&>code]:text-foreground [&>code]:p-1 [&>code]:rounded-sm",
    props.id && "scroll-mt-24",
  )}
  {...props}
>
  <slot />
</HeadingTag>
