---
import { cn } from "../../lib/utils";

interface Column {
  label: string;
  class?: string;
}

interface Cell {
  content: string;
  class?: string;
}

interface Props {
  columns: (string | Column)[];
  rows: Cell[][];
  tableClass?: string;
}

const { columns, rows, tableClass } = Astro.props;

const normalizeColumn = (col: string | Column): Column => {
  return typeof col === "string" ? { label: col } : col;
};

const normalizeCell = (cell: string | Cell): Cell => {
  return typeof cell === "string" ? { content: cell } : cell;
};
---

<div class="overflow-x-auto">
  <table class={cn("w-full border-collapse", tableClass)}>
    <thead>
      <tr class="border-b [&>th]:text-left">
        {
          columns.map((col) => {
            const column = normalizeColumn(col);
            return (
              <th class={cn("p-3 font-semibold", column.class)}>
                {column.label}
              </th>
            );
          })
        }
      </tr>
    </thead>
    <tbody>
      {
        rows.map((row) => (
          <tr class="border-b">
            {row.map((cell) => {
              const normalizedCell = normalizeCell(cell);
              return (
                <td class={cn("p-3", normalizedCell.class)}>
                  {normalizedCell.content}
                </td>
              );
            })}
          </tr>
        ))
      }
    </tbody>
  </table>
</div>
